<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Input and Output format · AiidaDFTK.jl</title><meta name="title" content="Input and Output format · AiidaDFTK.jl"/><meta property="og:title" content="Input and Output format · AiidaDFTK.jl"/><meta property="twitter:title" content="Input and Output format · AiidaDFTK.jl"/><meta name="description" content="Documentation for AiidaDFTK.jl."/><meta property="og:description" content="Documentation for AiidaDFTK.jl."/><meta property="twitter:description" content="Documentation for AiidaDFTK.jl."/><meta property="og:url" content="https://epfl-matmat.github.io/AiidaDFTK.jl/input_output/"/><meta property="twitter:url" content="https://epfl-matmat.github.io/AiidaDFTK.jl/input_output/"/><link rel="canonical" href="https://epfl-matmat.github.io/AiidaDFTK.jl/input_output/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">AiidaDFTK.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Input and Output format</a><ul class="internal"><li><a class="tocitem" href="#JSON-input"><span>JSON input</span></a></li><li><a class="tocitem" href="#Output-files"><span>Output files</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Input and Output format</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Input and Output format</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/epfl-matmat/AiidaDFTK.jl/blob/master/docs/src/input_output.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Input-and-Output-format"><a class="docs-heading-anchor" href="#Input-and-Output-format">Input and Output format</a><a id="Input-and-Output-format-1"></a><a class="docs-heading-anchor-permalink" href="#Input-and-Output-format" title="Permalink"></a></h1><p>This file gives a quick and dirty overview of the input and files of this package. No guarantees are given that this data is correct or up to date. We only make sure it works well in combination with the <a href="https://github.com/aiidaplugins/aiida-dftk">aiida-dftk</a> plugin.</p><p>If you wish to use the same IO pipeline in combination with a different package, please feel free to get in touch with us.</p><h2 id="JSON-input"><a class="docs-heading-anchor" href="#JSON-input">JSON input</a><a id="JSON-input-1"></a><a class="docs-heading-anchor-permalink" href="#JSON-input" title="Permalink"></a></h2><p>We follow the file <a href="https://github.com/epfl-matmat/AiidaDFTK.jl/raw/master/test/iron.json">iron.json</a> as an example. All units are atomic units.</p><p>The dict key <code>periodic_system</code> contains the structure: <code>bounding_box</code> the list of lattice vectors, <code>atoms</code> the individual atoms with their cartesian positions, pseudopotential information and extra keys, such as the initial magnetic moments. This block of data is parsed by <code>AiidaDFTK.build_system</code>.</p><p>The dict keys <code>model_kwargs</code> and <code>basis_kwargs</code> list the keyword arguments to be passed to the <a href="https://docs.dftk.org/stable/api/#DFTK.model_DFT"><code>DFTK.model_DFT</code></a> and <a href="https://docs.dftk.org/stable/api/#DFTK.PlaneWaveBasis"><code>DFTK.PlaneWaveBasis</code></a> functions. This data passes through the <code>AiidaDFTK.parse_kwargs</code> function, such that some special processing is available:</p><ul><li>Strings prefixed with <code>:</code> are interpreted as Julia symbols</li><li>Dicts with a key <code>$symbol</code> cause a Julia object to be constructed. In the iron example, this is used to specify Gaussian smearing by constructing a <code>Smearing.Gaussian()</code> object.</li><li>The special strings <code>$basis</code> and <code>$model</code> will be replaced by the results to the calls to <code>DFTK.PlaneWaveBasis</code> and <code>DFTK.model_DFT</code>, respectively.</li></ul><p>For the <code>functionals</code> key (Exchange-correlation functional) all keys supported by <code>model_DFT</code>, (that is the keys of <a href="https://www.tddft.org/programs/libxc/functionals/">Libxc</a>, are available.</p><p>The dict key <code>scf</code> specifies the SCF options. With the <code>$function</code> key set to <code>self_consistent_field</code> a one-shot SCF is run. The <code>$kwargs</code> list the keyword arguments passed to the <a href="https://docs.dftk.org/stable/api/#DFTK.self_consistent_field"><code>DFTK.self_consistent_field</code></a> function. These keys again pass through <code>AiidaDFTK.parse_kwargs</code>, such that above special processing is available. In the <code>iron.json</code> example this is used to construct a <code>DFTK.ScfConvergenceEnergy</code> object, setting the convergence tolerance to <code>1e-4</code> in the energy and to switch the mixing to <code>DFTK.KerkerDosMixing</code>.</p><p>Finally the dict key <code>postscf</code> lists functions to run after the SCF has been converged. This includes</p><ul><li><code>compute_forces_cart</code>: Computation of Cartesian forces</li><li><code>compute_stresses_cart</code>: Computation of Cartesian stresses.</li></ul><h2 id="Output-files"><a class="docs-heading-anchor" href="#Output-files">Output files</a><a id="Output-files-1"></a><a class="docs-heading-anchor-permalink" href="#Output-files" title="Permalink"></a></h2><p>After the SCF has been run, the <a href="https://docs.dftk.org/stable/api/#DFTK.save_scfres"><code>DFTK.save_scfres</code></a> function is used to store the final state in the <code>self_consistent_field.json</code> file and in the JLD2 file specified by the <code>scf/checkpointfile</code> key. The JSON file only contains &quot;small&quot; results (energies, eigenvalues etc.) while the JLD2 file contains the density (and if <code>scf/save_ψ</code> is true) also the wavefunction. Since JLD2 is compatible with HDF5 file, the latter file can be read using <code>h5py</code> or similar packages. Both the JSON and JLD2 formats are used from DFTK without modification, so see the documentation of <a href="https://docs.dftk.org/stable/api/#DFTK.save_scfres"><code>DFTK.save_scfres</code></a> for more details.</p><p>Additionally timings are stored in <code>timings.json</code> and results of post-SCF steps (such as force calculations) in <code>$function.hdf5</code>. I.e. if you run the post-SCF step <code>compute_forces_cart</code>, then the forces are stored in <code>compute_forces_cart.hdf5</code>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Friday 20 December 2024 09:57">Friday 20 December 2024</span>. Using Julia version 1.11.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
